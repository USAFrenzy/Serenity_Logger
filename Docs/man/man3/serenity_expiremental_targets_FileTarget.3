.TH "serenity::expiremental::targets::FileTarget" 3 "Mon Jan 31 2022" "Serenity Logger" \" -*- nroff -*-
.ad l
.nh
.SH NAME
serenity::expiremental::targets::FileTarget \- This class is in charge of logging to any basic file type and inherits from the \fBTargetBase\fP class for common logging functions and logging settings\&.  

.SH SYNOPSIS
.br
.PP
.PP
\fC#include <FileTarget\&.h>\fP
.PP
Inherits \fBserenity::expiremental::targets::TargetBase\fP\&.
.PP
Inherited by \fBserenity::expiremental::targets::RotatingTarget\fP\&.
.SS "Public Member Functions"

.in +1c
.ti -1c
.RI "\fBFileTarget\fP ()"
.br
.RI "Default constructor that sets the logger name to 'File_Target' and sets all other values to their defaults\&. "
.ti -1c
.RI "\fBFileTarget\fP (std::string_view fileName, bool replaceIfExists=false)"
.br
.RI "Constructor that will set the file name and will truncate the file if it already exists and if 'replaceIfExists' is set to true\&. Sets all other values to their defaults\&. "
.ti -1c
.RI "\fBFileTarget\fP (std::string_view name, std::string_view filePath, bool replaceIfExists=false)"
.br
.RI "Constructor that will set the logger name, file path, log directory, and whether or not to truncate this file if it exists or not\&. Sets all other values to their defaults\&. "
.ti -1c
.RI "\fBFileTarget\fP (std::string_view name, std::string_view formatPattern, std::string_view filePath, bool replaceIfExists=false)"
.br
.RI "Constructor that will set the logger name, format pattern to use, file path, log directory, and whether or not to truncate this file if it exists or not\&. Sets all other values to their defaults\&. "
.ti -1c
.RI "\fBFileTarget\fP (const \fBFileTarget\fP &)=delete"
.br
.RI "Deleted\&. "
.ti -1c
.RI "\fBFileTarget\fP & \fBoperator=\fP (const \fBFileTarget\fP &)=delete"
.br
.RI "Deleted\&. "
.ti -1c
.RI "\fB~FileTarget\fP ()"
.br
.RI "Cleans up any background threads, flushes contents to disk, and closes the file context being used\&. "
.ti -1c
.RI "const std::string \fBFilePath\fP ()"
.br
.RI "Returns the file path of the file context currently being held\&. "
.ti -1c
.RI "const std::string \fBFileName\fP ()"
.br
.RI "Returns the file name of the file context currently being held\&. "
.ti -1c
.RI "void \fBEraseContents\fP ()"
.br
.RI "Closes the file context currently being held and re-opens the same file context, truncating the file size to 0\&. "
.ti -1c
.RI "virtual bool \fBRenameFile\fP (std::string_view newFileName)"
.br
.RI "Closes the file (if open) and trys to rename current file context\&. If rename is succesful, will re-open file context under the new file name\&. "
.ti -1c
.RI "bool \fBOpenFile\fP (bool truncate=false)"
.br
.RI "Opens the file held by the file handle\&. "
.ti -1c
.RI "bool \fBCloseFile\fP ()"
.br
.RI "Joins any currently running flush background thread (if enabled) and if the file handle's file context is currently open, will flush contents to disk and close the file\&. "
.ti -1c
.RI "void \fBFlush\fP ()"
.br
.RI "If contents were written to buffer, this will now write contents of buffer to file and flush contents to disk, otherwise, just flushes contents to disk\&. "
.in -1c
.SS "Protected Member Functions"

.in +1c
.ti -1c
.RI "void \fBPolicyFlushOn\fP () override"
.br
.RI "Executes the currently set flush policy\&. "
.ti -1c
.RI "void \fBPrintMessage\fP (std::string_view formatted) override"
.br
.RI "Writes the message passed in by the \fCformatted\fP variable to the file context\&. "
.in -1c
.SS "Protected Attributes"

.in +1c
.ti -1c
.RI "std::ofstream \fBfileHandle\fP"
.br
.ti -1c
.RI "\fBFileSettings\fP \fBfileOptions\fP"
.br
.ti -1c
.RI "\fBBackgroundThread\fP \fBflushWorker\fP"
.br
.in -1c
.SH "Detailed Description"
.PP 
This class is in charge of logging to any basic file type and inherits from the \fBTargetBase\fP class for common logging functions and logging settings\&. 

For all \fBFileTarget\fP Constructors: 
.br
.IP "\(bu" 2
If either the directories or the file don't exist yet, the constructor will create the neccessary 
.br
 directories as well as the file needed to write to\&. 
.br

.IP "\(bu" 2
Default initializes the \fBTargetBase\fP inherited values 
.br
.IP "  \(bu" 4
These being the flush policy, the log level, and time mode\&. 
.br

.IP "  \(bu" 4
For the constructors that don't take in a format pattern, this also includes the default pattern 
.br

.br
 For the constructors that don't take a file path argument: 
.br

.PP

.IP "\(bu" 2
The log directory and log itself is created in the location that the application being run is located\&. 
.br

.IP "\(bu" 2
The default log directory is named 'Logs'\&. 
.br

.IP "\(bu" 2
The default file name is 'Generic_Log\&.txt' and will be created under the default log directory\&. 
.br
 
.PP

.SH "Constructor & Destructor Documentation"
.PP 
.SS "serenity::expiremental::targets::FileTarget::FileTarget (std::string_view fileName, bool replaceIfExists = \fCfalse\fP)\fC [explicit]\fP"

.PP
Constructor that will set the file name and will truncate the file if it already exists and if 'replaceIfExists' is set to true\&. Sets all other values to their defaults\&. While the file name will be changed to the parameter \fCfileName\fP, the file itself will be created under the default log directory\&. 
.PP
\fBParameters\fP
.RS 4
\fIfileName\fP The name of the file to create and/or use for logging 
.br
\fIreplaceIfExist\fP This value denotes whether or not to truncate the file if it exists already 
.RE
.PP

.SS "serenity::expiremental::targets::FileTarget::FileTarget (std::string_view name, std::string_view filePath, bool replaceIfExists = \fCfalse\fP)\fC [explicit]\fP"

.PP
Constructor that will set the logger name, file path, log directory, and whether or not to truncate this file if it exists or not\&. Sets all other values to their defaults\&. The name of the logger will be set based on the \fCname\fP variable\&. The file path should include the log directory and the actual file name in the \fCfilePath\fP variable as this is how it's intended to be parsed\&. If the file already exists and the \fCreplaceIFExists\fP variable is set to true, then the file will be truncated before opening for use in logging 
.PP
\fBParameters\fP
.RS 4
\fIname\fP The name the logger will be identified by\&. 
.br
\fIfilePath\fP the full path to the file\&. This value should include any directories as well as the file name itself\&. 
.br
\fIreplaceIfExist\fP This value denotes whether or not to truncate the file if it exists already 
.RE
.PP

.SS "serenity::expiremental::targets::FileTarget::FileTarget (std::string_view name, std::string_view formatPattern, std::string_view filePath, bool replaceIfExists = \fCfalse\fP)\fC [explicit]\fP"

.PP
Constructor that will set the logger name, format pattern to use, file path, log directory, and whether or not to truncate this file if it exists or not\&. Sets all other values to their defaults\&. The name of the logger will be set based on the \fCname\fP variable\&. The format pattern used can be empty if no prepended text is wanted and can include any of, none of, or all of the flags if desired\&. The file path should include the log directory and the actual file name in the \fCfilePath\fP variable as this is how it's intended to be parsed\&. If the file already exists and the \fCreplaceIFExists\fP variable is set to true, then the file will be truncated before opening for use in logging 
.PP
\fBParameters\fP
.RS 4
\fIname\fP The name the logger will be identified by\&. 
.br
\fIformatPattern\fP The pattern that is used to determine how the prepended text is displayed before the log message\&. 
.br
\fIfilePath\fP The full path to the file\&. This value should include any directories as well as the file name itself\&. 
.br
\fIreplaceIfExist\fP This value denotes whether or not to truncate the file if it exists already 
.RE
.PP

.SS "serenity::expiremental::targets::FileTarget::~FileTarget ()"

.PP
Cleans up any background threads, flushes contents to disk, and closes the file context being used\&. Cleans up background flush thread if enabled by joining the thread and then flushing the contents of the file handle to the file (if messages were written to buffer, will now write contents of buffer to file)\&. Afterwards, the file context being used is closed\&. 
.PP
References \fBCloseFile()\fP\&.
.SH "Member Function Documentation"
.PP 
.SS "bool serenity::expiremental::targets::FileTarget::CloseFile ()"

.PP
Joins any currently running flush background thread (if enabled) and if the file handle's file context is currently open, will flush contents to disk and close the file\&. 
.PP
\fBReturns\fP
.RS 4
If successful, returns true\&. If unsuccessful, will return false with error message 
.RE
.PP

.PP
References \fBFlush()\fP\&.
.SS "bool serenity::expiremental::targets::FileTarget::OpenFile (bool truncate = \fCfalse\fP)"

.PP
Opens the file held by the file handle\&. Opens the file context currently being held and sets the file buffer size using 'DEFAULT_BUFFER_SIZE' macro\&. If the file doessn't already exist, this function will create the file first\&. 
.PP
\fBReturns\fP
.RS 4
If successful, returns true\&. If unsuccessful, will return false with error message 
.RE
.PP

.SS "void serenity::expiremental::targets::FileTarget::PolicyFlushOn ()\fC [override]\fP, \fC [protected]\fP, \fC [virtual]\fP"

.PP
Executes the currently set flush policy\&. Compares current flush setting and executes that policy if active\&. Current policies are: always flush, never flush, LogLevel-based flushing and time-based flushing\&. Time based flushing uses a background thread worker which will intermittenly lock the file when elapsed time is reached from 'flushEvery' setting, flush the contents to disk, and then unlock the file for further writes 
.PP
Reimplemented from \fBserenity::expiremental::targets::TargetBase\fP\&.
.SS "void serenity::expiremental::targets::FileTarget::PrintMessage (std::string_view formatted)\fC [override]\fP, \fC [protected]\fP, \fC [virtual]\fP"

.PP
Writes the message passed in by the \fCformatted\fP variable to the file context\&. Checks if background flush thread is active, if it is - will lock access to the file for writing\&. If rotate setting is enabled, will check that the file size doesn't exceed file size limit and writes the message to the file\&. If the file size would exceed the limit, closes the current file and rotates to next file before writing the message\&. Will then follow any settings active in the flush policy 
.PP
\fBParameters\fP
.RS 4
\fIformatted\fP The actual message in its entirety to send to the output destination\&. 
.RE
.PP

.PP
Implements \fBserenity::expiremental::targets::TargetBase\fP\&.
.PP
Reimplemented in \fBserenity::expiremental::targets::RotatingTarget\fP\&.
.SS "bool serenity::expiremental::targets::FileTarget::RenameFile (std::string_view newFileName)\fC [virtual]\fP"

.PP
Closes the file (if open) and trys to rename current file context\&. If rename is succesful, will re-open file context under the new file name\&. Virtual function that can be overriden in derived classes\&. The intended usage is to close the file, try to rename the current file, and then open the file again\&. This implementation trys to catch any errors in the renaming process and opening process by returning an error message\&. 
.PP
\fBAttention\fP
.RS 4
This function, while it doesn't neccessarily throw, does not handle any exceptions that may be thrown when executed\&. It simply returns an error message to help diagnose issues; error handling is expected to be implemented by the user in this case\&. 
.RE
.PP
\fBReturns\fP
.RS 4
If successful, returns true\&. If unsuccessful, will return false with error message 
.RE
.PP

.PP
Reimplemented in \fBserenity::expiremental::targets::RotatingTarget\fP\&.
.PP
References \fBCloseFile()\fP, and \fBOpenFile()\fP\&.

.SH "Author"
.PP 
Generated automatically by Doxygen for Serenity Logger from the source code\&.
