.TH "serenity::expiremental::targets::RotatingTarget" 3 "Mon Jan 31 2022" "Serenity Logger" \" -*- nroff -*-
.ad l
.nh
.SH NAME
serenity::expiremental::targets::RotatingTarget \- This class is in charge of logging to any basic file type and handling the rotation of files up to a maximum number of files set\&. This class inherits from the \fBFileTarget\fP class and, therefore, the \fBTargetBase\fP class for common logging functions and logging settings\&.  

.SH SYNOPSIS
.br
.PP
.PP
\fC#include <RotatingTarget\&.h>\fP
.PP
Inherits \fBserenity::expiremental::targets::FileTarget\fP\&.
.SS "Public Member Functions"

.in +1c
.ti -1c
.RI "\fBRotatingTarget\fP ()"
.br
.RI "Default constructor that will set the logger name to 'Rotating_Logger'\&. All sets all other values to their defaults\&. "
.ti -1c
.RI "\fBRotatingTarget\fP (std::string_view name, std::string_view filePath, bool replaceIfExists=false)"
.br
.RI "Constructor that sets the logger name, the file name, file path, and log directory off the \fCfilePath\fP variable, and will truncate the file if it already exists depending on the value of \fCreplaceIfExists\fP\&. "
.ti -1c
.RI "\fBRotatingTarget\fP (std::string_view name, std::string_view formatPattern, std::string_view filePath, bool replaceIfExists=false)"
.br
.RI "Constructor that sets the logger name, the format pattern to use, the file name, file path, and log directory off the \fCfilePath\fP variable, and will truncate the file if it already exists depending on the value of \fCreplaceIfExists\fP\&. "
.ti -1c
.RI "\fBRotatingTarget\fP (const \fBRotatingTarget\fP &)=delete"
.br
.RI "Deleted\&. "
.ti -1c
.RI "\fBRotatingTarget\fP & \fBoperator=\fP (const \fBRotatingTarget\fP &)=delete"
.br
.RI "Deleted\&. "
.ti -1c
.RI "\fB~RotatingTarget\fP ()"
.br
.RI "Cleans up any background resources used and closes the file context currently held\&. "
.ti -1c
.RI "void \fBShouldRotateFile\fP (bool shouldRotate=true)"
.br
.RI "This function takes in a boolean value that determines whether or not the file context currently held should rotate when file size limit option has been reached\&. "
.ti -1c
.RI "void \fBSetRotateSettings\fP (\fBRotateSettings\fP settings)"
.br
.RI "Sets the overall rotation settings for the logger in regards to the filecontext\&. "
.ti -1c
.RI "void \fBRenameFileForRotation\fP ()"
.br
.RI "Sets up the base file given in constructor, or the base file after being renamed, for rotation\&. "
.ti -1c
.RI "void \fBRotateFileOnSize\fP ()"
.br
.RI "This function controls how the file is rotated\&. If the logger should rotate, the file will be closed and the next file in iteration up to the max file limit will be opened for writing\&. "
.ti -1c
.RI "bool \fBRenameFile\fP (std::string_view newFileName) override"
.br
.RI "Renames the current file to the name passed in via \fCnewFileName\fP\&. "
.ti -1c
.RI "void \fBPrintMessage\fP (std::string_view formatted) override"
.br
.RI "Writes the message to the currently held file context unless writing to the buffer was enabled - in which case, this will write to the buffer instead\&. "
.in -1c
.SS "Additional Inherited Members"
.SH "Detailed Description"
.PP 
This class is in charge of logging to any basic file type and handling the rotation of files up to a maximum number of files set\&. This class inherits from the \fBFileTarget\fP class and, therefore, the \fBTargetBase\fP class for common logging functions and logging settings\&. 

For all Rotating Target Constructors: 
.br
.IP "\(bu" 2
if either the directories or the file don't exist yet, the *constructor will create the neccessary directories 
.br
 as well as the file needed to write to\&. 
.br

.IP "\(bu" 2
For the constructors that don't take a file path variable, the logs will be written to a 'Logs' directory in the 
.br
 location that the app is being run from\&. 
.br
 
.PP

.SH "Constructor & Destructor Documentation"
.PP 
.SS "serenity::expiremental::targets::RotatingTarget::RotatingTarget ()"

.PP
Default constructor that will set the logger name to 'Rotating_Logger'\&. All sets all other values to their defaults\&. The default constructor will also create a file named 'Rotating_Log\&.txt' upon creation\&. This base name and extension will be cached internally and the file will be renamed as Rotating_Log_01\&.txt and follow rotation settings thereafter in the 'Logs' directory of where the app is running from 
.PP
References \fBRenameFileForRotation()\fP, and \fBserenity::expiremental::targets::TargetBase::SetLoggerName()\fP\&.
.SS "serenity::expiremental::targets::RotatingTarget::RotatingTarget (std::string_view name, std::string_view filePath, bool replaceIfExists = \fCfalse\fP)\fC [explicit]\fP"

.PP
Constructor that sets the logger name, the file name, file path, and log directory off the \fCfilePath\fP variable, and will truncate the file if it already exists depending on the value of \fCreplaceIfExists\fP\&. This constructor will cache the file name, the file path, the file extension, and the log directory off of the \fCfilePath\fP variable\&. The file will then be renamed for rotation - if the file already exists, it will delete the oldest file with the base file name and rename the file using that file's index number\&. 
.PP
\fBParameters\fP
.RS 4
\fIname\fP the name that the logger itself will use and be identified by 
.br
\fIfilePath\fP the full path to the file to write to 
.br
\fIreplaceIfExists\fP this value will determine if the file is truncated upon being opened the first time 
.RE
.PP

.PP
References \fBRenameFileForRotation()\fP, and \fBserenity::expiremental::targets::TargetBase::SetLoggerName()\fP\&.
.SS "serenity::expiremental::targets::RotatingTarget::RotatingTarget (std::string_view name, std::string_view formatPattern, std::string_view filePath, bool replaceIfExists = \fCfalse\fP)\fC [explicit]\fP"

.PP
Constructor that sets the logger name, the format pattern to use, the file name, file path, and log directory off the \fCfilePath\fP variable, and will truncate the file if it already exists depending on the value of \fCreplaceIfExists\fP\&. This constructor will cache the file name, the file path, the file extension, and the log directory off of the \fCfilePath\fP variable\&. The file will then be renamed for rotation - if the file already exists, it will delete the oldest file with the base file name and rename the file using that file's index number\&. 
.PP
\fBParameters\fP
.RS 4
\fIname\fP the name that the logger itself will use and be identified by 
.br
\fIformatPattern\fP the format pattern that determines how the prepended text will be displayed before the log message 
.br
\fIfilePath\fP the full path to the file to write to 
.br
\fIreplaceIfExists\fP this value will determine if the file is truncated upon being opened the first time 
.RE
.PP

.PP
References \fBRenameFileForRotation()\fP, and \fBserenity::expiremental::targets::TargetBase::SetLoggerName()\fP\&.
.SS "serenity::expiremental::targets::RotatingTarget::~RotatingTarget ()"

.PP
Cleans up any background resources used and closes the file context currently held\&. When the deconstructor is called, will clean up background flush thread if enabled, flush the contents of the file handle to the file (if messages were written to buffer, will now write contents of buffer to file), and then close the file context 
.PP
References \fBserenity::expiremental::targets::FileTarget::CloseFile()\fP\&.
.SH "Member Function Documentation"
.PP 
.SS "void serenity::expiremental::targets::RotatingTarget::PrintMessage (std::string_view formatted)\fC [override]\fP, \fC [virtual]\fP"

.PP
Writes the message to the currently held file context unless writing to the buffer was enabled - in which case, this will write to the buffer instead\&. Checks if background flush thread is active, if it is - will lock access to the file for writing\&. If rotate setting is enabled, will check that the file size doesn't exceed file size limit and writes the message to the file\&. If the file size would exceed the limit, closes the current file and rotates to next file before writing the message\&. This function will then follow any settings active in the flush policy 
.PP
\fBParameters\fP
.RS 4
\fIformatted\fP The actual message in its entirety to send to the output destination\&. 
.RE
.PP

.PP
Reimplemented from \fBserenity::expiremental::targets::FileTarget\fP\&.
.PP
References \fBRotateFileOnSize()\fP\&.
.SS "bool serenity::expiremental::targets::RotatingTarget::RenameFile (std::string_view newFileName)\fC [override]\fP, \fC [virtual]\fP"

.PP
Renames the current file to the name passed in via \fCnewFileName\fP\&. Will close the current file being written to and replace the old file name with the new file name given\&. Previous files are unaffected\&. However, if cycling through rotation, future files will have this new name as their base as well\&. 
.PP
Reimplemented from \fBserenity::expiremental::targets::FileTarget\fP\&.
.PP
References \fBserenity::expiremental::targets::FileTarget::CloseFile()\fP, \fBserenity::expiremental::targets::FileTarget::OpenFile()\fP, and \fBRenameFileForRotation()\fP\&.
.SS "void serenity::expiremental::targets::RotatingTarget::RenameFileForRotation ()"

.PP
Sets up the base file given in constructor, or the base file after being renamed, for rotation\&. This function will cache the file's name, extension, and path, as well as the log directory for the file before renaming the current file to the first iteration of the log file to rotate through\&. (Example: Rotate_Log\&.txt becomes Rotate_Log_01\&.txt)\&. If this rotation-ready file already exists, will open the file by overwriting its contents and truncating its size to 0\&. 
.PP
References \fBserenity::expiremental::targets::FileTarget::CloseFile()\fP, and \fBserenity::expiremental::targets::FileTarget::OpenFile()\fP\&.
.SS "void serenity::expiremental::targets::RotatingTarget::RotateFileOnSize ()"

.PP
This function controls how the file is rotated\&. If the logger should rotate, the file will be closed and the next file in iteration up to the max file limit will be opened for writing\&. If the logger should rotate, will close the current file, increment the file count up to max number of files set, and try to open the next file in iteration\&. If file already exists, will remove the oldest file with the given file name base before opening the next file in iteration\&. If the setting \fCrotateFile\fP is set to false, this function will return and do nothing else\&. 
.PP
References \fBserenity::expiremental::targets::FileTarget::CloseFile()\fP, and \fBserenity::expiremental::targets::FileTarget::OpenFile()\fP\&.
.SS "void serenity::expiremental::targets::RotatingTarget::SetRotateSettings (\fBRotateSettings\fP settings)"

.PP
Sets the overall rotation settings for the logger in regards to the filecontext\&. Current options revolve aroundfile size settings only and can be found in the \fBRotateSettings\fP class\&. 
.PP
\fBParameters\fP
.RS 4
\fIsettings\fP controls the following: file size limit, number of files to rotate through, and whether or not the logger should rotate through files up to the max number of files set 
.RE
.PP


.SH "Author"
.PP 
Generated automatically by Doxygen for Serenity Logger from the source code\&.
