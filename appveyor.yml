version: 0.2.{build}
branches:
  only:
  - main
  - dev
environment:
  matrix:
  - APPVEYOR_BUILD_WORKER_IMAGE: Visual Studio 2019
    GENERATOR: '"Visual Studio 16 2019" -A x64'
    BUILD_SANDBOX: 'OFF'
    BUILD_DEMOS: 'OFF'
    ENABLE_UTF8_FLAG: 'OFF'
  - APPVEYOR_BUILD_WORKER_IMAGE: Visual Studio 2019
    GENERATOR: '"Visual Studio 16 2019" -A x64'
    BUILD_SANDBOX: 'OFF'
    BUILD_DEMOS: 'OFF'
    ENABLE_UTF8_FLAG: 'ON'
  - APPVEYOR_BUILD_WORKER_IMAGE: Visual Studio 2022
    GENERATOR: '"Visual Studio 17 2022" -A x64'
    BUILD_SANDBOX: 'OFF'
    BUILD_DEMOS: 'OFF'
    ENABLE_UTF8_FLAG: 'OFF'
  - APPVEYOR_BUILD_WORKER_IMAGE: Visual Studio 2022
    GENERATOR: '"Visual Studio 17 2022" -A x64'
    BUILD_SANDBOX: 'OFF'
    BUILD_DEMOS: 'OFF'
    ENABLE_UTF8_FLAG: 'ON'

build_script:
- cmd: >-
    mkdir build

    cmake -B build -G %GENERATOR% -D BUILD_SANDBOX=%BUILD_SANDBOX% -D BUILD_DEMOS=%BUILD_DEMOS% -D ENABLE_UTF8_FLAG=%ENABLE_UTF8_FLAG% -D CMAKE_BUILD_TYPE=Release -S .
